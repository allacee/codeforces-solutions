Пояснения к примененному алгоритму:
Основная сложность данной задачи не в нахождении математического алгоритма, который бы давал правильный ответ, а именно в реализации этого алгоритма оптимальным способом.
Исходя из анализа услвоия можно сделать вывод, что для решения задачи требуются возможности быстро:
1) определять город по человеку;
2) определять город по сумме денег в этом городе;
3) определять сумму денег в городе и количество дней, которые этот город был самым богатым, по его названию;
Для выполнения этих условий будем использовать красно-черные деревья - 1 и 3 через std::map (для 1: ключ - фамилия, значение - текущий город; для 3: ключ - название города, значение - сумма денег в городе и количество дней, которые этот город был самым богатым), 2 условие через std::set т.к. возможны случаи, когда в двух разных городах находится одинаковая сумма денег.
Экспериментальным путем выяснилось, что все 3 условия должны выполнятся как минимум за logN, иначе 	Time limit exceeded :(